[
    {
        "level": "#",
        "title": "Synthesizing Controller For Safe Navigation Using Control Density Function",
        "content": "\nJoseph Moyalan, Sriram S.K.S Narayanan, Andrew Zheng, and Umesh Vaidya Abstract\u2014 We consider the problem of navigating a nonlinear dynamical system from some initial set to some target set while avoiding collision with an unsafe set. We extend the concept of density function to control density function (CDF) for solving navigation problems with safety constraints. The occupancybased interpretation of the measure associated with the density function is instrumental in imposing the safety constraints. The navigation problem with safety constraints is formulated as a quadratic program (QP) using CDF. The existing approach using the control barrier function (CBF) also formulates the navigation problem with safety constraints as QP. One of the main advantages of the proposed QP using CDF compared to QP formulated using CBF is that both the convergence/stability and safety can be combined and imposed using the CDF. Simulation results involving the Duffing oscillator and safe navigation of Dubin car models are provided to verify the main findings of the paper.\n"
    },
    {
        "level": "##",
        "title": "I. Introduction",
        "content": "\nMost control system applications in robotics and automotive engineering include driving the nonlinear system dynamics from an initial set to a target set while avoiding certain unsafe sets. Safe navigation is a well-known problem in the robotics community, with applications extending to aerospace, unmanned ground vehicles, manufacturing, power systems, etc. Existing literature on the safe navigation problem involves jointly solving the safety and stability problem using artificial potential methods [1]. However, using attractive and repulsive potentials often leads to local minima, which is a well-known problem [2], [3]. Another approach includes [4], which makes use of the control Lyapunov function (CLF) and control barrier function (CBF) to design a feedback law to achieve simultaneously both convergence to a target set and avoidance of an unsafe set. However, the control design is problem-specific and less intuitive, and if the safety and convergence objectives conflict, then such a feedback law can't be designed. Another approach uses the combination of the CLF and CBF to construct a quadratic program (QP) to solve for the desired safe control [5], [6]. However, finding CLF and CBF to formulate the QP is not trivial. The solution to the navigation problem is also achieved in the dual-density space. The density function was first introduced in [7] as a dual to Lyapunov function for stability analysis. This density function was later used as a safety certificate of Engineering, Clemson University, Clemson, SC;\n{jmoyala,sriramk,azheng,uvaidya}@clemson.edu.\n\nusing the sum of squares optimization method for the analysis and safety of the nonlinear system [8]. In [9], the authors utilized navigation measures for designing safe controllers using a convex formulation. In [10], the authors formulate the safety problem as a co-design problem of finding the density function and optimal safe controller. However, the iterative approach of estimating the density function from the optimal control can be computationally expensive, depending upon the complexity of the problem. In contrast, we design a controller for a given known density function, which is constructed based on the occupancy-based interpretation of the density. Similarly, the use of linear operators such as Koopman and Perron-Frobenius (P-F) operators for convex data-driven approaches for optimal control and control with safety constraints have been explored in [11]\u2013[14]. The convex data-driven approaches heavily rely on observable functions to lift the dynamics to the space of functions. The number of observables required to lift the dynamics to function space increases with an increase in the dimension or complexity of the underlying nonlinear system, which makes it computationally expensive. As such, these approaches suffer the curse of dimensionality. In [15], to avoid the curse of dimensionality, the authors provide an analytical expression for the density-based feedback controller for the navigation of single integrator dynamics, which can be viewed as a dual construction of the navigation functions from [3]. The control design in [15] is only applicable to single integrator dynamics or systems, which can be reformulated as a single integrator using a change of coordinates and inverse dynamics approach. This paper extends the densitybased controller introduced in [15] to nonlinear systems with drift. Therefore, unlike [15], our approach can be applied to any general nonlinear system that contains drift. In this paper, we introduce the notion of control density function (CDF). The CDF is an extension of the density function, just like CLF is the extension of the Lyapunov function for control systems. The construction of CDF is provided based on [15], which is then utilized to formulate the problem statement as a QP with CDF-based constraints. The CDF-based constraint ensures a nonlinear control system's simultaneous convergence and safety. This contrasts with the approaches given in [5], [6] where one needs to augment CLF constraints with CBF to ensure convergence. Another difference includes almost everywhere convergence of the system dynamics, which is a weaker notion of convergence than control Lyapunov functions. As a result, the control law obtained from CDF constraints ensures convergence for almost all initial conditions. The set of all initial conditions not converging to the target set will have a zero Lebesgue measure [16]. We also provide an example of an underactuated system in the form of the Dubin car model, where obstacles are only present in the subspace of the system dynamics. Finally, unlike [15], we also show that the density-based safe controller can be combined with a nominal controller for optimal performance by modifying the cost function to include the norm of the difference between the desired safe control and the nominal control. The rest of the paper is organized as follows. Section II contains the problem statement and some preliminaries, and Section III consists of the paper's main results. Section IV discusses the computational framework for the prescribed QP. In Section V, we provide some simulation results followed by some conclusions.\n"
    },
    {
        "level": "##",
        "title": "Ii. Preliminaries And Problem Statement",
        "content": "\nConsider the dynamical system of the form\n\n$$\\dot{\\mathbf{x}}=\\mathbf{f}(\\mathbf{x})+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\tag{1}$$\n\nwhere $\\mathbf{x}\\in D\\subseteq\\mathbb{R}^{n}$ and $\\mathbf{u}\\in U\\subseteq\\mathbb{R}^{m}$ are the states and the control inputs respectively. We also assume that $\\mathbf{f},\\mathbf{g}\\in\\mathcal{C}^{1}(D,\\mathbb{R}^{n})$ are continuously differentiable functions on $D$. The unsafe sets are represented by $\\mathcal{U}\\subset D$. Next, $\\mathbf{X}_{0},\\mathbf{X}_{T}\\subset D$ represents the initial set and target set, respectively. In this paper, we assume the target is located at the origin, i.e., $\\mathbf{X}_{T}=0$. We represent $s_{t}(\\mathbf{x})$ to be the solution of (1) with respect to some control $\\mathbf{u}$ at time $t$ starting from the initial condition $\\mathbf{x}$. We also denote $\\mathcal{B}(D)$ to be the Borel $\\sigma$-algebra on $D$ and $\\mathcal{M}(D)$ as the vector space of real-valued measures on $\\mathcal{B}(D)$ and $m(\\cdot)$ denotes Lebesgue measure. Also, we represent $\\bar{D}:=D\\setminus\\mathcal{N}_{\\eta}$ where $\\mathcal{N}_{\\eta}$ represents a small neighborhood of $\\eta$ radius around $\\mathbf{X}_{T}$. The notation $\\nabla_{\\mathbf{x}}$ denotes $[\\frac{\\partial}{\\partial x_{1}},\\ldots,\\frac{\\partial}{\\partial x_{n}}]^{\\top}$ where $\\mathbf{x}\\in\\mathbb{R}^{n}$. Also, $tr(A)$ represents the trace of the matrix $A$.\n\nProblem 1. (Almost everywhere (a.e.) safe navigation) The\nprimary objective of this paper is to design a control u\nto drive the trajectories of the system given by (1) from\nalmost all initial conditions (w.r.t. Lebesgue measure) from\nthe initial set X0 to a target set XT while avoiding the\nunsafe set U.\n\nA. Density function for safe navigation\n\n  The construction of the density-based safe control for the\ndynamics given in (1) is inspired by [15]. We define the\nunsafe set U. Let there be K number of obstacles. We define\na continuous scalar-valued function ck(x) for k = 1, . . . , K.\nNow, each obstacle set can be defined as follows:\n\n$C_{k}:=\\{\\mathbf{x}\\in D:c_{k}(\\mathbf{x})\\leq0\\}$ (2)\nTherefore, the set defining the total unsafe region is given by U := \ufffdK\nk=1 Ck. Similarly, we will define another continuous scalar-valued function bk(x) to define the sensing region for each obstacle set as follows:\n\n$B_{k}:=\\{\\mathbf{x}\\in D:b_{k}(\\mathbf{x})\\leq0\\}\\setminus C_{k}$ (3)\nNow, we use the functions ck(x) and bk(x) to formulate a smooth inverse bump function. First, we start by constructing the following functions,\n\nmk = ck(x) ck(x) \u2212 bk(x), mk ) \u03c8k(x) = exp( \u22121 exp( \u22121 mk ) + exp( \u22121 1\u2212mk ).\nUsing the functions mk(x) and \u03c8k(x), we define a piecewise smooth inverse bump function \u03a8k(x) as follows:\n\n\u03a8k(x) = 0, x \u2208 Ck \u03c8k(x), x \u2208 Bk 1, otherwise . (4) \uf8f1 \uf8f4 \uf8f2 \uf8f4 \uf8f3\nNote that \ufffdK\nk=1 \u03a8k(x) encodes the unsafe set U. To encode information about the target set XT , we use V (x) which acts as a distance function from the current state x to the target state XT . The V (x) can be modified to adjust to the geometry of the underlying configuration space. In the Euclidean space with x \u2208 Rn, we use V (x) = (x \u2212 XT )\u22a4P(x \u2212 XT )\nfor some *P >* 0. Finally, the density function \u03c1(x) for the safe control is given as follows:\n\n\u03c1(x) = \ufffdK k=1 \u03a8k(x) V (x)\u03b1 (5)\nfor some *\u03b1 >* 0.\n\nIt can be observed that the density function \u03c1(x) given in (5) is a smooth function for all x \u2208 D. Fig. 1a shows an environment with one obstacle set U and target XT . Fig.\n\n1b shows the corresponding density function representation. Note that the density function \u03c1(x) takes minimum value for x *\u2208 U* and max value for x \u2208 XT .\n\nAssumption 1. We assume that system dynamics given by\n(1) is locally linearizable inside the region N\u03b7 containing\nXT = 0. We also assume that the linearized dynamics at\nthe origin are stabilizable. Therefore the local stability of\nXT = 0 can be achieved by designing a local linear feedback\ncontroller.\n\n  The construction of density function in (5) was proposed\nin [15] and used for solving the safe navigation problem with\n\nsimple integrator dynamics of the form \u02d9x = u. The feedback\ncontroller u for the safe navigation was shown to be of the\nform\n\n$$\\mathbf{u}(\\mathbf{x})={\\frac{\\partial\\rho}{\\partial\\mathbf{x}}}\\qquad\\qquad\\qquad(6)$$\nThis paper's main contribution is introducing the CDF for solving the navigation problem as stated in Problem 1 for nonlinear system (1) with drift.\n"
    },
    {
        "level": "##",
        "title": "Iii. Control Density Function (Cdf)",
        "content": "\nThe density functions can be utilized to check the stability of any nonlinear system [14], [17]. However, such density functions cannot be used to design a safe control. By drawing inspiration from how Lyapunov functions were extended to CLF [18], [19], and how barrier functions were extended to CBF [6], [20], we propose in this section an extension of the density function and call it as the CDF. Let us again consider the nonlinear system as follows:\n\n$\\bf x=f(x)+g(x)u$\n\nwhere u = [u1, . . . , um]\u22a4 and g(x) = [g1(x), . . . , gm(x)].\nAll the vector fields are assumed to belong to C1( \u00afD, Rn).\n  The following theorem provides the main result for the\nsafe navigation control for a nonlinear system using CDF.\n\n**Theorem 1**.: _Under Assumption 1, given system dynamics in (1) and density function given by (5), the system trajectories can be driven from almost all initial conditions to a target set $\\mathbf{X}_{T}$ while avoiding unsafe $\\mathcal{U}$ if there exists a control $\\mathbf{u}\\in U$ and $\\lambda>0$ such that_\n\n$$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\rho)\\geq0,\\ \\ a.e.\\ \\mathbf{x}\\in\\bar{D}$$ $$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\rho)\\geq\\lambda>0,\\ \\ \\forall\\ \\mathbf{x}\\in\\mathbf{X}_{0}\\tag{8}$$\n\n_The proof is provided in the Appendix._\nBased on the result of Theorem 1, we see that solving for the desired safe control u is an infinite-dimensional feasibility problem. However, if we assume that f(x), g(x)\nand \u03c1(x) are known to us, then we can solve for u point-wise along the system trajectory by formulating it as QP utilizing the CDF constraints given in (8). The QP-CDF formulation is given below:\n\n$$\\min_{\\mathbf{u}}\\|\\mathbf{u}\\|^{2}$$ s.t. $$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\rho)\\geq0,\\ \\ a.e.\\ \\mathbf{x}\\in\\bar{D}$$ $$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\rho)\\geq\\lambda>0,\\ \\ \\forall\\ \\mathbf{x}\\in\\mathbf{X}_{0}\\tag{9}$$\n\n**Remark 1**.: _If there exists a nominal control, $\\mathbf{u}_{0}$, for the system given by (7), we can reformulate (9) to enforce $\\mathbf{u}_{0}$ in the absence of unsafe sets by introducing a cost function which minimizes $\\|\\mathbf{u}-\\mathbf{u}_{0}\\|^{2}$._\n"
    },
    {
        "level": "##",
        "title": "Iv. Computational Framework",
        "content": "\nThe inequality in (8) can be expanded as follows:\n\n$$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho)+\\nabla_{\\mathbf{x}}^{\\top}\\left[\\mathbf{g}(\\mathbf{x})\\rho\\right]\\mathbf{u}+tr\\left((\\nabla_{\\mathbf{x}}\\mathbf{u}^{\\top})^{\\top}\\mathbf{g}\\rho\\right)>0\\tag{10}$$\n\nWe observe that while trying to solve for $\\mathbf{u}$ point-wise along the system trajectory, the term $\\nabla u_{i}$ is a spatial operator and \nrequires information on points in the neighborhood of the system trajectory. Therefore, to calculate \u2207ui, we perturb the point on the trajectory by \u03f5 along the directional basis to obtain points [z1*, . . . , z*n] where zi \u2208 Rn. Here, zi = x+\u03f5 ei where ei is a column vector consisting of all zeros except at ith position where the value is 1. These points around the trajectory will be used to calculate the \u2207ui.\n\nTo make things easier, we can split the inequality given in (10) as follows:\n\n$$\\nabla\\cdot(\\mathbf{f}\\rho)+\\nabla_{\\mathbf{x}}^{\\top}\\left[\\mathbf{g}(\\mathbf{x})\\rho\\right]\\mathbf{u}\\geq\\beta\\rho$$ $$\\left|tr\\left((\\nabla_{\\mathbf{x}}\\mathbf{u}^{\\top})^{\\top}\\mathbf{g}\\right)\\right|<\\beta\\tag{11}$$\n\nNow we can write $\\nabla u_{i}$ as follows:\n\n$$\\nabla u_{i}=\\left[\\frac{u_{i}^{1}-u_{i}}{\\epsilon},\\ldots,\\frac{u_{i}^{n}-u_{i}}{\\epsilon}\\right]^{\\top}\\tag{12}$$\nwhere uj = [uj\n1, . . . , uj m]\u22a4 represents the control satisfying\n(11) at point zj. This can be written in matrix form for all the m control values as follows:\n\n$$(\\nabla_{\\mathbf{x}}\\mathbf{u}^{\\top})^{\\top}=\\left[\\begin{array}{ccc}\\frac{u_{1}^{1}-u_{1}}{\\epsilon}&\\ldots&\\frac{u_{1}^{n}-u_{1}}{\\epsilon}\\\\ \\vdots&&\\\\ \\frac{u_{m}^{1}-u_{m}}{\\epsilon}&\\ldots&\\frac{u_{m}^{n}-u_{m}}{\\epsilon}\\end{array}\\right]\\tag{13}$$\n\nTherefore, we can rewrite (11) as follows:\n\n$$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho(\\mathbf{x}))+\\nabla_{\\mathbf{x}}^{\\top}\\left[\\mathbf{g}(\\mathbf{x})\\rho(\\mathbf{x})\\right]\\mathbf{u}\\geq\\beta\\rho(\\mathbf{x})$$ $$\\nabla\\cdot(\\mathbf{f}(z_{1})\\rho(z_{1}))+\\nabla_{\\mathbf{x}}^{\\top}\\left[\\mathbf{g}(z_{1})\\rho(z_{1})\\right]\\mathbf{u}^{1}\\geq\\beta\\rho(z_{1})$$ $$\\vdots$$ $$\\nabla\\cdot(\\mathbf{f}(z_{n})\\rho(z_{n}))+\\nabla_{\\mathbf{x}}^{\\top}\\left[\\mathbf{g}(z_{n})\\rho(z_{n})\\right]\\mathbf{u}^{n}\\geq\\beta\\rho(z_{n})$$ $$\\left|tr((\\nabla_{\\mathbf{x}}\\mathbf{u}^{\\top})^{\\top}\\ \\mathbf{g}(\\mathbf{x}))\\right|<\\beta\\tag{14}$$\n\nHere, the number of decision variables to solve the above linear inequalities will be $m(n+1)$. The algorithm 1 summarizes the steps to solve for safe navigation control using QP-CDF as given in (9).\n\nRemark 2. The value of \u03b1 determines the rate of conver-\ngence towards the target set. This stems from the fact that\n\u03b1 appears in the distance function V (x) which contains\ninformation on the target set. It can be inferred that the\nconvergence rate can be increased by increasing the value\nof \u03b1 and vice-versa. Similarly, increasing the sensing region\naround the obstacle will lead to smoother avoidance control,\nand decreasing the sensing region will lead to more aggres-\nsive avoidance control near the obstacle.\n"
    },
    {
        "level": "##",
        "title": "V. Simulation Results",
        "content": "\nIn this section, we provide some navigation results for different types of system dynamics starting with the Duffing oscillator.\n"
    },
    {
        "level": "##",
        "title": "Algorithm 1: Qp-Cdf",
        "content": "\nInput: f, g, \u03c1, x0, \u03b2, N\nfor k = 1 : N do\n\nzj = xk\u22121 + ej \u2200 j = 1*, . . . , n*. Solve for uk, u1 k, . . . , un k do min \u2225uk\u22252+\u2225u1 k\u22252+ \u00b7 \u00b7 \u00b7 + \u2225un k\u22252 s.t. \u2207 \u00b7 (f(xk\u22121)\u03c1(xk\u22121))+ \u2207\u22a4 x [g(xk\u22121)\u03c1(xk\u22121)] uk *> \u03b2\u03c1*(xk\u22121), \u2207 \u00b7 (f(z1)\u03c1(z1) + \u2207\u22a4 x [g(z1)\u03c1(z1)] u1 k > \u03b2\u03c1(z1), ... xk = xk\u22121 + \u2206t(f(xk\u22121) + g(xk\u22121)uk) \u2207 \u00b7 (f(zn)\u03c1(zn) + \u2207\u22a4 x [g(zn)\u03c1(zn)] un k > \u03b2\u03c1(zn), \ufffd\ufffdtr((\u2207xu\u22a4 k )\u22a4 g(xk\u22121)) \ufffd\ufffd < \u03b2\n"
    },
    {
        "level": "##",
        "title": "A. Duffing Oscillator",
        "content": "\nLet us consider the Duffing oscillator dynamics:\n\n$$\\dot{x}_{1}=x_{2}$$ $$\\dot{x}_{2}=x_{1}-x_{1}^{3}-0.1x_{2}+u\\tag{15}$$\nFig. 2 provides a safe navigation control trajectory for the Duffing oscillator by solving QP-CDF. The density function is constructed based on equations (4) and (5). The functions used to describe the obstacle set are given by c(x) :=\n\u2225x \u2212 o\u22252\u2212r2\n1 where o and r1 are the center and radius of the circular obstacle respectively. Similarly, the function used to define sensing region is given by b(x) := \u2225x \u2212 o\u22252\u2212r2\n2\nwhere r2 is the radius of the sensing region of the circular obstacle. Here, the obstacle radius is 0.5 units and the sensing radius is 0.7 units with its center located at [0, 0]. The matrix P used to construct the function V (x) is obtained by linearizing the dynamics around the target point and solving the algebraic Riccati equation with the identity matrix as the state and control gain matrix. Here, the control bounds are\n\u00b12. It can be observed that the control action obtained from the QP-CDF is minimally invasive. The system trajectories follow along the vector field of the Duffing oscillator when it is away from the obstacle. The control from the QP-CDF is mainly active near the obstacles by making the system trajectories drive away from the obstacles while trying to converge to the target set.\n"
    },
    {
        "level": "##",
        "title": "B. Dubin Car Model",
        "content": "\nLet us consider the Dubin car model as follows:\n\n$\\dot{x}_{1}=v\\cos(\\theta)$ (16a) $\\dot{x}_{2}=v\\sin(\\theta)$ (16b) $\\dot{\\theta}=\\omega$ (16c)\nwhere u and \u03c9 are the control inputs. We assume that the obstacles to be avoided are only present in the x1\u2212x2 space.\n\nIn this example, we first reformulate (16a)-(16b) in the form of single integrator dynamics as given in (17) and solve for u1 and u2 using the QP-CDF given in (9). These control values will be then utilized in the design of v and \u03c9. The single integrator dynamics in the x1\u2212x2 space is as follows:\n\n$$\\dot{x}_{1}=u_{1}\\tag{17a}$$ $$\\dot{x}_{2}=u_{2}\\tag{17b}$$\n\nThe safe control for (17) is obtained by solving the QP-CDF given in (9). Here, $c_{k}({\\bf x}):=\\|{\\bf x}-o_{k}\\|^{2}-r_{1k}^{2}$ and $b_{k}({\\bf x}):=\\|{\\bf x}-o_{k}\\|^{2}-r_{2k}^{2}$ where $o_{k}$, $r_{1k}$ and $r_{2k}$ are the center, radius and sensing radius of the $k^{th}$ circular obstacle. The control obtained as the solution of the QP-CDF can be used to calculate $u$ and $\\tilde{\\theta}$ as follows:\n\n$$v=\\sqrt{u_{1}^{2}+u_{2}^{2}},\\quad\\tilde{\\theta}=\\tan^{-1}\\left(\\frac{u_{2}}{u_{1}}\\right)\\tag{18}$$\n\nNow, the control $\\omega$ needs to be designed such that $\\theta-\\tilde{\\theta}$ tends to zero. Therefore, we consider the Lyapunov function given by $0.5(\\theta-\\tilde{\\theta})^{2}$ which gives us the following control law for $\\omega$:\n\n$$\\omega=\\dot{\\tilde{\\theta}}-k(\\theta-\\tilde{\\theta})\\tag{19}$$\nfor some *k >* 0. Fig. 3 provides a safe navigation trajectory for the unicycle model in x1\u2212x2 space. The obstacle radius is\n2 units and the sensing radius is 2.5 units with the center for the two obstacles located at [3, 1] and [7.5, \u22121] respectively.\n\nThe value of gain k is chosen to be 10. The control action mainly drives the system trajectories away from the obstacle set while converging on the target set.\n"
    },
    {
        "level": "##",
        "title": "Vi. Conclusion",
        "content": "\nThe problem of safe navigation of nonlinear dynamical systems is considered. We introduce the notion of CDF as an extension to the density-based controllers. The CDF- based safety constraints are inspired by the occupancy-based interpretation of the measure associated with the density function. We then formulate the navigation problem with safety constraints as a QP using CDF. The existing approach for navigation problems includes CBF-based QP. The advantage of CDF-based QP over CBF-based QP is that both the convergence and safety constraints can be imposed using CDF. Finally, we provide simulation results for safe navigation of the Dubin car model and Duffing oscillator to showcase the validity of CDF-based QP.\n"
    },
    {
        "level": "##",
        "title": "Vii. Appendix",
        "content": "\nThe proof of Theorem 1 relies on the following Lemma.\n\n**Lemma 1**.: _If_\n\n$$\\int_{0}^{\\infty}\\int_{{\\bf X}_{0}}1_{{\\cal U}}(s_{t}({\\bf x}))d{\\bf x}\\;dt=0\\tag{20}$$\n\n_then_\n\n$$\\int_{{\\bf X}_{0}}1_{{\\cal U}}(s_{t}({\\bf x}))d{\\bf x}=0\\;\\;\\;\\forall t\\geq0\\tag{21}$$\n\n_i.e., the amount of time system trajectories spend in set ${\\cal U}$ starting from the positive measure set ${\\bf X}_{0}$ is equal to zero._\n\n**Proof:** The proof is done by the method of contradiction. Let us assume (21) is not true. Then there exists a time $\\bar{t}$ such that\n\n$$\\int_{{\\bf X}_{0}}1_{{\\cal U}}(s_{\\bar{t}}({\\bf x}))d{\\bf x}>0.$$\n\nNow, from the continuity of the solution of the differential equation, there exists a $\\Delta$ such that\n\n$$\\int_{\\bar{t}}^{\\bar{t}+\\Delta}\\int_{{\\bf X}_{0}}1_{{\\cal U}}({\\bf s}_{t}({\\bf x}))d{\\bf x}\\;dt>0$$\nTherefore,\n\n$$\\begin{array}{l}{{0<\\int_{\\bar{t}}^{\\bar{t}+\\Delta}\\int_{{\\bf X}_{0}}1_{{\\cal U}}({\\bf s}_{t}({\\bf x}))d{\\bf x}\\;d t}}\\\\ {{\\leq\\int_{0}^{\\infty}\\int_{{\\bf X}_{0}}^{\\bar{t}}1_{{\\cal U}}(s_{t}({\\bf x}))d{\\bf x}\\;d t=0.}}\\end{array}$$\nHence, we arrive at a contradiction.\n\nProof of Theorem 1: Let us consider the following:\n\n$$\\nabla\\cdot(\\mathbf{f}(\\mathbf{x})\\rho+\\mathbf{g}(\\mathbf{x})\\mathbf{u}\\rho)=h(\\mathbf{x})\\tag{22}$$\n\nwhere $h(\\mathbf{x})\\geq0$ and $h(\\mathbf{x})\\geq\\lambda>0$ for $\\mathbf{x}\\in\\mathbf{X}_{0}$. Now, through the method of characteristics, the function $\\rho(\\mathbf{x})$ can be written as follows:\n\n$$\\rho(\\mathbf{x})=\\int_{0}^{\\infty}h(s_{-t}(\\mathbf{x}))\\left|\\frac{\\partial s_{-t}(\\mathbf{x})}{\\partial\\mathbf{x}}\\right|dt,\\tag{23}$$\n\nwhere $|\\cdot|$ represents the determinant. This can be easily verified by simple substitution of (23) in (22) and using the fact that\n\n$$\\lim_{t\\rightarrow\\infty}h(s_{-t}(\\mathbf{x}))\\left|\\frac{\\partial s_{-t}(\\mathbf{x})}{\\partial\\mathbf{x}}\\right|=0.\\tag{24}$$\n\nThe limit in (24) is the consequence of $\\rho(\\mathbf{x})$ being bounded in $\\bar{D}$ and using Barbalat's Lemma. The term inside the integral in (23) can be written using the linear Perron-Frobenius (P-F) operator as follows:\n\n$$\\partial\\mathbf{x}$$\nTherefore,\n\n[Pth](x) = h(s\u2212t(x)) \ufffd\ufffd\ufffd\ufffd \u2202s\u2212t(x) \ufffd\ufffd\ufffd\ufffd . (25) 0 [Pth](x)dt. (26) \u03c1(x) = \ufffd \u221e\nNow, utilizing (24), we can write\n\nlim t\u2192\u221e[Pth](x) = 0 =\u21d2 lim t\u2192\u221e[Pt1X0](x) = 0 (27) \u00af D [Pt1X0](x)1A(x)dx\nwhich follows because h(x) \u2265 *\u03bb >* 0 \u2200x \u2208 X0 and using dominated convergence theorem. Here, 1X0 represents the indicator function for X0. Now, for any A \u2286 \u00afD, we have\n\ufffd\n\nA [Pt1X0](x)dx = \ufffd \u00af D 1X0(x)1A(st(x))dx (28) = \ufffd\n\nThis can be observed by using the definition of P-F operator\nin (25) and doing the change of variables in integration such\nas y = s\u2212t(x) and dy =\n                          \ufffd\ufffd\ufffd \u2202s\u2212t(x)\n\nA [Pt1X0](x)dx = m{x \u2208 X0 : st(x) \u2208 A}.\n\u2202x\n\ufffd\ufffd\ufffd dx and relabelling. The right hand side of (28) can be seen as follows:\n\ufffd\nTherefore, using (27), we observe that\n\nA [ lim t\u2192\u221e Pt1X0](x)dx = m{x \u2208 X0 : lim t\u2192\u221e st(x) \u2208 A}. 0 = \ufffd\nThe above statement can be generalized for any measurable Lebesgue set A \u2286 \u00afD. Therefore,\n\nm{x \u2208 X0 : lim t\u2192\u221e st(x) \u0338= 0} = 0. U \u03c1(x)dx = 0. (29) U 0 [Pt1X0](x)dtdx \u2264 \ufffd\nNow, from the construction of the density function, we know that \u03c1(x) = 0 \u2200 x *\u2208 U*. Therefore,\n\ufffd\n\n\ufffd \u221e 0 [Pt1X0](x)dtdx = 0. (30) U\nUtilizing the Markov property of the P-F operator and the fact that indicator functions are non-negative functions, we can rewrite (29) as follows:\n\ufffd\n\n\ufffd \u221e\nNow, doing the change of variables in integration such as y = s\u2212t(x) and dy =\n\ufffd\ufffd\ufffd \u2202s\u2212t(x)\n\n\u00af D 0 [Pt1X0](x)1U(x)dtdx U\n\u2202x\n\ufffd\ufffd\ufffd dx and relabelling, the lefthand side of the (30) can be written as follows:\n\ufffd\n\n\ufffd \u221e 0 [Pt1X0](x)dtdx = \ufffd \ufffd \u221e 0 \u00af D 1X0(x)1U(st(x))dx dt = \ufffd \u221e \ufffd 0 X0 1U(st(x))dx dt = 0. (31) = \ufffd \u221e \ufffd X0 1U(st(x))dx = 0 \u2200t \u2265 0\nNow, from (31) and using Lemma 1, we can conclude the following:\n\ufffd\n"
    },
    {
        "level": "##",
        "title": "References",
        "content": "\n[1] O. Khatib, \"Real-time obstacle avoidance for manipulators and mobile\nrobots,\" *The international journal of robotics research*, vol. 5, no. 1,\npp. 90\u201398, 1986.\n[2] B. Krogh, \"A generalized potential field approach to obstacle avoidance control,\" in Proc. SME Conf. on Robotics Research: The Next Five Years and Beyond, Bethlehem, PA, 1984, 1984, pp. 11\u201322.\n[3] E. Rimon, *Exact robot navigation using artificial potential functions*.\nYale University, 1990.\n[4] M. Z. Romdlony and B. Jayawardhana, \"Uniting control lyapunov and\ncontrol barrier functions,\" in 53rd IEEE Conference on Decision and\nControl.\nIEEE, 2014, pp. 2293\u20132298.\n[5] A. D. Ames, X. Xu, J. W. Grizzle, and P. Tabuada, \"Control barrier\nfunction based quadratic programs for safety critical systems,\" IEEE\nTransactions on Automatic Control, vol. 62, no. 8, pp. 3861\u20133876,\n2016.\n[6] A. D. Ames, S. Coogan, M. Egerstedt, G. Notomista, K. Sreenath,\nand P. Tabuada, \"Control barrier functions: Theory and applications,\" in *2019 18th European control conference (ECC)*.\nIEEE, 2019, pp.\n3420\u20133431.\n[7] A. Rantzer, \"A dual to lyapunov's stability theorem,\" Systems &\nControl Letters, vol. 42, no. 3, pp. 161\u2013168, 2001.\n[8] A. Rantzer and S. Prajna, \"On analysis and synthesis of safe control\nlaws,\" in 42nd Allerton Conference on Communication, Control, and Computing.\nUniversity of Illinois, 2004, pp. 1468\u20131476.\n[9] U. Vaidya, \"Optimal motion planning using navigation measure,\"\nInternational Journal of Control, vol. 91, no. 5, pp. 989\u2013998, 2018.\n[10] Y. Chen, M. Ahmadi, and A. D. Ames, \"Optimal safe controller\nsynthesis: A density function approach,\" in 2020 American Control\nConference (ACC).\nIEEE, 2020, pp. 5407\u20135412.\n[11] X. Ma, B. Huang, and U. Vaidya, \"Optimal quadratic regulation of\nnonlinear system using koopman operator,\" in 2019 American Control Conference (ACC).\nIEEE, 2019, pp. 4911\u20134916.\n[12] B. Huang and U. Vaidya, \"A convex approach to data-driven optimal\ncontrol via perron-frobenius and koopman operators,\" IEEE Transactions on Automatic Control, 2022.\n[13] H. Yu, J. Moyalan, U. Vaidya, and Y. Chen, \"Data-driven optimal\ncontrol of nonlinear dynamics under safety constraints,\" IEEE Control\nSystems Letters, vol. 6, pp. 2240\u20132245, 2022.\n[14] J. Moyalan, H. Choi, Y. Chen, and U. Vaidya, \"Data-driven optimal\ncontrol via linear transfer operators: A convex approach,\" *Automatica*,\nvol. 150, p. 110841, 2023.\n[15] A. Zheng, S. S. Narayanan, and U. Vaidya, \"Safe navigation using\ndensity functions,\" *IEEE Robotics and Automation Letters*, 2023.\n[16] J. Moyalan, H. Choi, Y. Chen, and U. Vaidya, \"Sum of squares\nbased convex approach for optimal control synthesis,\" in 2021 29th Mediterranean Conference on Control and Automation (MED). IEEE,\n2021, pp. 1270\u20131275.\n[17] R. Rajaram, U. Vaidya, M. Fardad, and B. Ganapathysubramanian,\n\"Stability in the almost everywhere sense: A linear transfer operator approach,\" *Journal of Mathematical analysis and applications*, vol.\n368, no. 1, pp. 144\u2013156, 2010.\n[18] Z. Artstein, \"Stabilization with relaxed controls,\" Nonlinear Analysis:\nTheory, Methods & Applications, vol. 7, no. 11, pp. 1163\u20131173, 1983.\n[19] E. D. Sontag, \"A lyapunov-like characterization of asymptotic controllability,\" *SIAM journal on control and optimization*, vol. 21, no. 3,\npp. 462\u2013471, 1983.\n[20] P. Wieland and F. Allg\u00f6wer, \"Constructive safety using control barrier\nfunctions,\" *IFAC Proceedings Volumes*, vol. 40, no. 12, pp. 462\u2013467, 2007."
    }
]